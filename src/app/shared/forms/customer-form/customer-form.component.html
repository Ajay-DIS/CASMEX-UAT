<form
  *ngIf="apiData && objectKeys(apiData)['length']"
  class="customer-form"
  [formGroup]="customerForm"
>
  <ng-container *ngFor="let section of formSections">
    <p-panel
      [header]="
        objectKeys(multiDetailsSectionData).includes(section['formName'])
          ? 'Related Parties Details'
          : section['formName']
      "
      [toggleable]="true"
      [formGroup]="customerForm.controls[section['formName']]"
      *ngIf="isSectionVisible(section)"
    >
      <!-- *** MULTISECTION TABLE WITH FORMRULES FIELDS START *** -->
      <!-- <div
        *ngIf="
          objectKeys(multiDetailsSectionData).includes(section['formName']) &&
          multiDetailsSectionData[section['formName']].length
        "
        class="details-table"
      >
        <p-table
          [value]="multiDetailsSectionData[section['formName']]"
          [rowHover]="true"
        >
          <ng-template pTemplate="header">
            <tr>
              <th
                *ngFor="
                  let fieldLabel of getFieldLabels(
                    multiDetailsSectionData[section['formName']][0]
                  )
                "
              >
                {{ fieldLabel }}
              </th>
            </tr></ng-template
          >
          <ng-template
            pTemplate="body"
            let-sectionDetail
            let-rowIndex="rowIndex"
            ><tr
              [style.cursor]="'pointer'"
              (click)="editSectionDetails(sectionDetail, section, rowIndex)"
              pTooltip="Edit Details"
              tooltipPosition="top"
            >
              <td
                *ngFor="
                  let fieldKey of objectKeys(
                    multiDetailsSectionData[section['formName']][0]
                  )
                "
              >
                {{ sectionDetail[fieldKey]["valueToDisplay"] }}
              </td>
            </tr></ng-template
          >
        </p-table>
        
      </div> -->
      <!-- *** MULTISECTION TABLE WITH FORMRULES FIELDS ENDS *** -->
      <!-- NEW FLOW START -->

      <div
        class="related-party-section-div"
        *ngIf="
          objectKeys(multiDetailsSectionData).includes(section['formName'])
        "
      >
        <div class="related-party-details-table">
          <p-table [value]="addedPartyDetailsTableData" [rowHover]="true">
            <ng-template pTemplate="header">
              <tr>
                <th>Party Type</th>
                <th>Customer Code</th>
                <th>Customer Name</th>
                <th>Mobile Number</th>
                <th>Documents</th>
                <!-- <th>ID Type</th>
                <th>ID Number</th> -->
                <th style="text-align: center">Party Status</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-partyDetail>
              <tr>
                <td>
                  {{ getPartyNameFromMasterByCode(partyDetail["partyType"]) }}
                </td>

                <td>
                  <a
                    *ngIf="
                      relatedPartyTypeCode == 'C' && !isNormalCustomer;
                      else for_other_cases
                    "
                    [ngStyle]="{
                      position: 'relative',
                      top: '0px',
                      fontSize: '11px',
                      left: '18%',
                      color: 'var(--primary-color)',
                      textDecoration: 'underline',
                      cursor: 'pointer'
                    }"
                    (click)="
                      checkCustomerStateForEdit(
                        partyDetail['partyCustomerCode'],
                        partyDetail['partyType'],
                        partyDetail['isNormalCustomer']
                      )
                    "
                  >
                    {{ partyDetail["partyCustomerCode"] }}</a
                  >

                  <ng-template #for_other_cases>
                    {{ partyDetail["partyCustomerCode"] }}</ng-template
                  >
                </td>
                <td>{{ partyDetail["fullName"] }}</td>
                <td>{{ partyDetail["mobileNumber"] }}</td>
                <td>
                  <span
                    class="view-link"
                    style="pointer-events: none; cursor: not-allowed"
                    >View Documents</span
                  >
                </td>
                <!-- <td>Passport</td>
                <td>1221212121</td> -->
                <td style="border: none; text-align: center">
                  <label class="switch" style="border: none">
                    <input
                      #statusInp
                      [value]="partyDetail['status']"
                      type="checkbox"
                      [checked]="
                        partyDetail['status'] == 'Active' ||
                        partyDetail['status'] == 'A'
                          ? true
                          : false
                      "
                      [style.width]="'100%'"
                      (click)="
                        onRelatedPartyStatusChange(partyDetail['status'])
                      "
                    />
                    <span class="slider round"></span>
                  </label>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td [attr.colspan]="7">No Party Added Yet.</td>
              </tr>
            </ng-template>
          </p-table>
        </div>

        <div
          *ngIf="relatedPartyTypeCode == 'C'"
          class="add-party-options flex w-full mt-5 mb-3 align-items-center"
        >
          <span class="select-from-table-text">
            Search Existing Customer & add it as Party OR
          </span>

          <div class="inline-block add-party-link ml-2">
            <span
              [pTooltip]="selectedPartyType ? '' : 'First Choose Party Type'"
              [style.cursor]="selectedPartyType ? 'pointer' : 'not-allowed'"
              (click)="
                selectedPartyType &&
                  addNewCustomerAsParty(selectedPartyType['code'])
              "
              >Add New Customer as Party</span
            >
          </div>
        </div>

        <div
          *ngIf="relatedPartyTypeCode == 'C'"
          class="customer-search-component"
        >
          <div class="grid w-full">
            <div class="col-2 choose-party-type">
              <div>
                <!-- <label>Choose Party Type</label><span class="required">*</span> -->
                <p-dropdown
                  class="block"
                  [options]="
                    section['fields'][0]['setOptions'] &&
                    section['fields'][0]['setOptions'].length
                      ? section['fields'][0]['setOptions']
                      : masterData[section['fields'][0]['apiKey']]
                  "
                  placeholder="Choose Party Type"
                  optionLabel="codeName"
                  [appendTo]="'body'"
                  [filter]="true"
                  filterBy="codeName"
                  [virtualScroll]="true"
                  [virtualScrollItemSize]="35"
                  panelStyleClass="formFields-dropdown"
                  [(ngModel)]="selectedPartyType"
                  [ngModelOptions]="{ standalone: true }"
                  (ngModelChange)="onChangePartyType()"
                >
                  <ng-template let-options pTemplate="item">
                    <div class="truncate-text">
                      <div>{{ options.codeName }}</div>
                    </div>
                  </ng-template></p-dropdown
                >
                <!-- <p-dropdown
                  class="block"
                  [options]="masterData['masterRelatedParties']"
                  placeholder="Choose Party Type"
                  optionLabel="codeName"
                  [appendTo]="'body'"
                  [filter]="true"
                  filterBy="codeName"
                  [virtualScroll]="true"
                  [virtualScrollItemSize]="35"
                  panelStyleClass="formFields-dropdown"
                  [(ngModel)]="selectedPartyType"
                  [ngModelOptions]="{ standalone: true }"
                  (ngModelChange)="onChangePartyType()"
                >
                  <ng-template let-options pTemplate="item">
                    <div class="truncate-text">
                      <div>{{ options.codeName }}</div>
                    </div>
                  </ng-template></p-dropdown
                > -->
              </div>
            </div>
            <div class="col-10 grid">
              <div class="col-9 col-sm-12 col-xs-12 inline-flex grid">
                <div class="select-customer-div col-3 text-right">
                  <p-dropdown
                    [options]="userTypeOptions"
                    [(ngModel)]="customerType"
                    [ngModelOptions]="{ standalone: true }"
                    (onChange)="onUserTypeChange($event.value)"
                    optionValue="code"
                    optionLabel="name"
                    class="select-customer"
                    [style]="{ maxWidth: '128px', textAlign: 'left' }"
                  ></p-dropdown>
                </div>
                <div class="criteria-search-box-div col-9 grid">
                  <p-dropdown
                    [options]="searchCriteriaOptions"
                    [(ngModel)]="customerFieldType"
                    [ngModelOptions]="{ standalone: true }"
                    (onChange)="onCriteriaChange($event.value)"
                    optionLabel="name"
                    optionValue="code"
                    [placeholder]="searchField"
                    class="select-criteria col-4"
                    [panelStyle]="{ maxWidth: '128px' }"
                  >
                    <ng-template let-options pTemplate="item">
                      <div class="truncate-text">
                        <div>{{ options.name }}</div>
                      </div>
                    </ng-template>
                  </p-dropdown>
                  <div
                    class="p-input-icon-right search-box-div col-8"
                    (keyup.enter)="searchByEnter($event)"
                  >
                    <ng-container [ngSwitch]="criteriaType">
                      <input
                        *ngSwitchCase="'SQL'"
                        class="searchBox"
                        type="text"
                        pInputText
                        [(ngModel)]="currentCriteriaValue"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="Search"
                        [readonly]="true"
                      />
                      <input
                        *ngSwitchCase="'text'"
                        class="searchBox"
                        type="text"
                        pInputText
                        [(ngModel)]="currentCriteriaValue"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="Search"
                      />

                      <p-inputNumber
                        *ngSwitchCase="'number'"
                        class="block searchBox"
                        [(ngModel)]="currentCriteriaValue"
                        [ngModelOptions]="{ standalone: true }"
                        mode="decimal"
                        [useGrouping]="false"
                        placeholder="Search"
                      >
                      </p-inputNumber>
                      <p-calendar
                        class="searchBox"
                        *ngSwitchCase="'date'"
                        placeholder="DD/MM/YYYY"
                        dateFormat="dd/mm/yy"
                        [(ngModel)]="currentCriteriaValue"
                        [ngModelOptions]="{ standalone: true }"
                        [readonlyInput]="false"
                        [appendTo]="'body'"
                        appDateMask
                      ></p-calendar>
                      <i *ngIf="criteriaType != 'SQL'" class="pi pi-search"></i>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="col-3 col-sm-6 col-xs-6 buttonsearch">
                <button
                  pButton
                  pRipple
                  type="button"
                  (click)="searchCustomerMap(customerType)"
                  label="Search"
                  class="search-btn ml-2 headerbtn"
                  [disabled]="!(customerType && selectedPartyType)"
                  [pTooltip]="
                    selectedPartyType
                      ? customerType
                        ? ''
                        : 'Select Customer Type'
                      : 'First Choose Party Type'
                  "
                  [style.cursor]="selectedPartyType ? 'pointer' : 'not-allowed'"
                ></button>
                <button
                  pButton
                  pRipple
                  type="button"
                  (click)="clearCriteria()"
                  label="Clear"
                  class="p-button-warning search-btn ml-2 mt-lg-0 headerbtn"
                ></button>
              </div>
            </div>
          </div>
          <div class="customerCriteria">
            <div *ngIf="searchCriteria.length">
              <div class="col-10">
                <span class="font-normal">You have searched on</span>

                <span
                  *ngFor="let criteria of searchCriteria; let i = index"
                  class="customerMapConditions"
                >
                  {{ criteria }}
                  <span
                    role="button"
                    style="padding: 0px 0px 0px 8px; margin-bottom: 10px"
                    (click)="ondeletecriteria(i, criteria)"
                  >
                    <svg
                      style="margin-bottom: 4px"
                      xmlns="http://www.w3.org/2000/svg"
                      width="12.6"
                      height="12.6"
                      fill="#dc3545"
                      class="bi bi-x-circle"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                      />
                      <path
                        d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"
                      />
                    </svg>
                  </span>
                </span>
              </div>
            </div>
          </div>
          <div class="w-full">
            <div
              *ngIf="showTable || !globalSearch"
              class="customer-search-table w-full"
            >
              <p-table
                #dt
                [columns]="columns"
                [value]="customerData"
                dataKey="customerCode"
                [lazy]="true"
                (onLazyLoad)="loadCustomers($event)"
                [totalRecords]="totalRecords"
                [paginator]="totalRecords && customerData.length"
                [rows]="pageSize"
                [rowHover]="true"
                [loading]="customerTableLoading"
                [rowsPerPageOptions]="
                  totalRecords <= 5 ? null : [5, 10, 20, 50, 100]
                "
                selectionMode="single"
                [(selection)]="currentSelectedCustomerAsParty"
                (onRowSelect)="onRowSelect($event)"
                (onRowUnselect)="onRowUnselect($event)"
              >
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th
                      *ngIf="customerData.length"
                      style="width: 50px !important; min-width: 50px !important"
                    ></th>
                    <th
                      *ngFor="let col of columns; let c = index"
                      pResizableColumn
                      [style.width]="col.width"
                      [pSortableColumn]="col.field"
                    >
                      {{ col.header }}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                  </tr>
                  <tr class="search-row">
                    <th
                      *ngIf="customerData.length"
                      style="width: 50px !important; min-width: 50px !important"
                    ></th>
                    <th *ngFor="let col of columns; let c = index">
                      <span
                        class="p-input-icon-left"
                        [style.width]="col.searchWidth"
                      >
                        <i class="pi pi-search"></i>
                        <input
                          type="text"
                          class="p-inputtext table-search"
                          placeholder="Search"
                          (input)="
                            dt.filter(
                              $event.target.value,
                              col.field,
                              'contains'
                            )
                          "
                        />
                      </span>
                    </th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-rowData
                  let-columns="columns"
                  let-index="rowIndex"
                >
                  <tr [pReorderableRow]="index">
                    <td>
                      <div
                        [pTooltip]="
                          !selectedPartyType ? 'First choose Party Type' : ''
                        "
                        class="relative"
                      >
                        <p-tableRadioButton
                          [value]="rowData"
                          [disabled]="!selectedPartyType"
                        ></p-tableRadioButton>
                        <i
                          *ngIf="rowData['allRequiredDocsPresent'] == false"
                          class="absolute pi pi-exclamation-triangle"
                          style="
                            top: 2px;
                            left: 30px;
                            font-size: 18px;
                            color: red;
                          "
                          [pTooltip]="
                            'Some Required Documents are Missing, click on Customer code to edit'
                          "
                        ></i>
                      </div>
                    </td>
                    <ng-container *ngFor="let col of columns; let i = index">
                      <td *ngIf="!(col.field == 'status')">
                        <div *ngIf="!(i == 0)" style="display: inline-block">
                          {{ rowData[col["field"]] }}
                        </div>
                        <div *ngIf="i == 0">
                          <a
                            [ngStyle]="{
                              position: 'relative',
                              top: '0px',
                              color:
                                rowData['allRequiredDocsPresent'] == false
                                  ? 'var(--primary-color)'
                                  : 'black',
                              fontSize: '11px',
                              cursor:
                                rowData['allRequiredDocsPresent'] == false
                                  ? 'pointer'
                                  : '',
                              left: '32%',
                              textDecoration:
                                rowData['allRequiredDocsPresent'] == false
                                  ? 'underline'
                                  : 'none'
                            }"
                            (click)="
                              rowData['allRequiredDocsPresent'] == false &&
                                editCustomerForMissingDocs(
                                  rowData['customerCode'],
                                  selectedPartyType['code']
                                )
                            "
                            >{{ rowData[col["field"]] }}</a
                          >
                        </div>
                      </td>
                      <td
                        *ngIf="col.field == 'status'"
                        style="border: none; text-align: center"
                      >
                        <label class="switch" style="border: none">
                          <input
                            #statusInp
                            [value]="rowData[col['field']]"
                            type="checkbox"
                            (click)="
                              confirmStatus($event, rowData, customerType)
                            "
                            [checked]="
                              rowData[col['field']] == 'Active' ||
                              rowData[col['field']] == 'A'
                                ? true
                                : false
                            "
                          />
                          <span class="slider round"></span>
                        </label>
                      </td>
                    </ng-container>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td [attr.colspan]="columns.length">No Data found.</td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="paginatorleft" let-state>
                  <span
                    *ngIf="state && state.totalRecords && customerData.length"
                  >
                    Showing
                    {{ customerData.length ? state.page * state.rows + 1 : 0 }}
                    -
                    {{
                      state.rows * (state.page + 1) > state.totalRecords
                        ? state.totalRecords
                        : state.rows * (state.page + 1)
                    }}
                    of {{ state.totalRecords }} Customers
                  </span>
                </ng-template>
              </p-table>
            </div>
            <div
              class="no-data-msg flex align-items-center justify-content-center"
              *ngIf="!customerData?.length && showNoDataFound"
            >
              <p class="mb-0" style="font-size: 14px">No Record Found.</p>
            </div>
          </div>
        </div>

        <div
          *ngIf="relatedPartyTypeCode == 'C'"
          class="add-party-btn-div text-center mt-3"
        >
          <div
            class="inline-block"
            [pTooltip]="
              currentSelectedCustomerAsParty
                ? allRequiredDocumentsPresent
                  ? ''
                  : 'Selected Customer have missing details.'
                : 'Search exiting Customers & select one from the list.'
            "
          >
            <button
              class="p-button-primary add-party-btn ml-2 mt-lg-0"
              pButton
              pRipple
              type="button"
              label="+ Add Party"
              [disabled]="
                !(currentSelectedCustomerAsParty && allRequiredDocumentsPresent)
              "
              (click)="
                addPartyDetailsIntoTable(
                  currentSelectedCustomerAsParty,
                  'link',
                  currentSelectedCustomerAsParty['customerCode']
                )
              "
            ></button>
          </div>
        </div>
      </div>

      <!-- NEW FLOW ENDS -->
      <div
        *ngIf="
          !objectKeys(multiDetailsSectionData).includes(section['formName'])
        "
        class="row"
      >
        <ng-container *ngFor="let field of section['fields']">
          <div
            *ngIf="field.visible"
            [ngClass]="{
              'col-xs-12 col-sm-6 col-md-4 col-lg-2 p-2 fieldForm':
                !field['newLineField'],
              checkbox: field['fieldType'] == 'checkbox',
              newLineField: field['newLineField']
            }"
          >
            <label
              [attr.title]="
                field['fieldLabel'].length > 27 ? field['fieldLabel'] : ''
              "
              >{{
                field["fieldLabel"].length > 27 && !field?.newLineField
                  ? field["fieldLabel"].substring(0, 27) + ".."
                  : field["fieldLabel"]
              }}</label
            ><span *ngIf="field.required" class="required">*</span>
            <ng-container [ngSwitch]="field.fieldType">
              <ng-container *ngSwitchCase="'text'">
                <div
                  style="position: 'relative'"
                  *ngIf="field.name != 'employerNameEmpDetails'"
                  [pTooltip]="
                    customerForm.controls[field['formName']]['controls'][
                      field.name
                    ].errors?.invalidValue
                      ? field.displayValidValuesOnHover == 'Yes'
                        ? 'Valid values are ' + field.validValues.join(', ')
                        : ''
                      : ''
                  "
                  tooltipPosition="top"
                >
                  <input
                    type="text"
                    class="block"
                    pInputText
                    [formControlName]="field.name"
                    [ngStyle]="{
                      paddingLeft: field.prefix ? '45px' : '',
                      paddingRight: field.suffix ? '40px' : ''
                    }"
                    (ngModelChange)="checkValidValuesText($event, field)"
                  />
                  <span class="prefix-Inp" *ngIf="field.prefix">{{
                    field.prefix
                  }}</span>
                  <span class="suffix-Inp" *ngIf="field.suffix">{{
                    field.suffix
                  }}</span>
                </div>
                <div
                  class="employername"
                  *ngIf="field.name == 'employerNameEmpDetails'"
                >
                  <p-autoComplete
                    [formControlName]="field.name"
                    [suggestions]="filteredEmployer"
                    (completeMethod)="searchEmployer($event)"
                  ></p-autoComplete>
                </div>
              </ng-container>

              <ng-container *ngSwitchCase="'number'">
                <ng-container>
                  <div
                    style="position: 'relative'"
                    [pTooltip]="
                      customerForm.controls[field['formName']]['controls'][
                        field.name
                      ].errors?.invalidValue
                        ? field.displayValidValuesOnHover == 'Yes'
                          ? 'Valid values are ' + field.validValues.join(', ')
                          : ''
                        : ''
                    "
                    tooltipPosition="top"
                  >
                    <input
                      type="text"
                      class="block"
                      pInputText
                      [formControlName]="field.name"
                      [ngStyle]="{
                        paddingLeft: field.prefix ? '45px' : '',
                        paddingRight: field.suffix ? '40px' : ''
                      }"
                      (ngModelChange)="checkValidValuesText($event, field)"
                    />
                    <span class="prefix-Inp" *ngIf="field.prefix">{{
                      field.prefix
                    }}</span>
                    <span class="suffix-Inp" *ngIf="field.suffix">{{
                      field.suffix
                    }}</span>
                  </div>
                </ng-container>
              </ng-container>
              <p-calendar
                *ngSwitchCase="'date'"
                class="block"
                placeholder="DD/MM/YYYY"
                dateFormat="dd/mm/yy"
                [showIcon]="true"
                [formControlName]="field.name"
                [minDate]="field.minDate"
                [maxDate]="field.maxDate"
                [defaultDate]="field.defaultDate"
                [readonlyInput]="false"
                [appendTo]="'body'"
                (onSelect)="handleDateSelect(calendar, $event)"
                (ngModelChange)="checkValidValuesDate($event, field)"
                appDateMask
                [pTooltip]="
                  customerForm.controls[field['formName']]['controls'][
                    field.name
                  ].errors?.invalidValue
                    ? field.displayValidValuesOnHover == 'Yes'
                      ? 'Valid values are ' + field.validValues.join(', ')
                      : ''
                    : ''
                "
                tooltipPosition="top"
                #calendar
              ></p-calendar>
              <p-checkbox
                *ngSwitchCase="'checkbox'"
                [formControlName]="field.name"
                [binary]="true"
                (onChange)="sameAddress($event, field.name)"
              ></p-checkbox>
              <!-- <p-autoComplete
              *ngSwitchCase="'dropdownSingle'"
              class="block"
              [showEmptyMessage]="true"
              [suggestions]="filteredCountries"
              (completeMethod)="filterCountry($event)"
              field="name"
              [minLength]="1"
              [forceSelection]="true"
            ></p-autoComplete> -->
              <p-dropdown
                *ngSwitchCase="'dropdownSingle'"
                class="block"
                [options]="
                  field['setOptions'] && field['setOptions'].length
                    ? field['setOptions']
                    : masterData[field['apiKey']]
                "
                [formControlName]="field.name"
                placeholder="Type to search"
                optionLabel="codeName"
                [appendTo]="'body'"
                [filter]="true"
                filterBy="codeName"
                [virtualScroll]="true"
                [virtualScrollItemSize]="35"
                panelStyleClass="formFields-dropdown"
              >
                <ng-template let-options pTemplate="item">
                  <div class="truncate-text">
                    <div>{{ options.codeName }}</div>
                  </div>
                </ng-template></p-dropdown
              >
              <p-dropdown
                *ngSwitchCase="'smart-search'"
                class="block smartSearch"
                [formControlName]="field.name"
                [options]="
                  field['setOptions'] && field['setOptions'].length
                    ? field['setOptions']
                    : masterData[field['apiKey']]
                "
                optionLabel="codeName"
                [filter]="true"
                filterBy="codeName"
                placeholder="Type to search"
              >
                <ng-template pTemplate="selectedItem">
                  <div class="country-item country-item-value" *ngIf="field">
                    <div>
                      {{
                        customerForm.controls[section["formName"]]["controls"][
                          field.name
                        ].value.codeName
                      }}
                    </div>
                  </div>
                </ng-template>
                <ng-template let-options pTemplate="item">
                  <div class="truncate-text">
                    <div>{{ options.codeName }}</div>
                  </div>
                </ng-template>
              </p-dropdown>
              <select
                *ngSwitchCase="'multiselect'"
                multiple
                [formControlName]="field.name"
              >
                <option
                  *ngFor="let option of field.options"
                  [value]="option.value"
                >
                  {{ option.label }}
                </option>
              </select>
            </ng-container>
            <small
              *ngIf="
                (customerForm.controls[section['formName']]['controls'][
                  field.name
                ].errors?.required &&
                  objectKeys(multiDetailsSectionData).includes(
                    section['formName']
                  ) &&
                  section.submitted) ||
                (customerForm.controls[section['formName']]['controls'][
                  field.name
                ].errors?.required &&
                  !objectKeys(multiDetailsSectionData).includes(
                    section['formName']
                  ) &&
                  submitted)
              "
              class="p-error block"
            >
              {{ field.fieldLabel }} is required.</small
            >
            <small
              *ngIf="
                !customerForm.controls[section['formName']]['controls'][
                  field.name
                ].pristine &&
                customerForm.controls[section['formName']]['controls'][
                  field.name
                ].errors?.minlength
              "
              class="p-error block"
              >{{ field.fieldLabel }} must be {{ field.minLength }} characters
              long.</small
            >
            <small
              *ngIf="
                !customerForm.controls[section['formName']]['controls'][
                  field.name
                ].pristine &&
                customerForm.controls[section['formName']]['controls'][
                  field.name
                ].errors?.pattern
              "
              class="p-error block"
              >{{
                field.regexMsg
                  ? field.regexMsg
                  : "Improper " + field.fieldLabel + " format."
              }}</small
            >
            <small
              *ngIf="
                !customerForm.controls[section['formName']]['controls'][
                  field.name
                ].pristine &&
                customerForm.controls[section['formName']]['controls'][
                  field.name
                ].errors?.maxlength
              "
              class="p-error block"
              >{{ field.fieldLabel }} must not exceed
              {{ field.maxLength }} characters.</small
            >
            <small
              *ngIf="
                customerForm.controls[section['formName']]['controls'][
                  field.name
                ].errors?.invalidValue
              "
              class="p-error block"
              >Please enter a valid value.</small
            >
          </div>
        </ng-container>
      </div>
      <!-- *** MULTISECTION ADD BTN START *** -->
      <!-- <div
        *ngIf="
          objectKeys(multiDetailsSectionData).includes(section['formName'])
        "
        class="add-details-btn flex align-items-center gap-2"
      >
        <button
          #addCriteriaBtn
          pButton
          pRipple
          style="position: static; left: 645px; font-size: 1.5rem"
          type="button"
          label="+"
          class="p-button-primary"
          (click)="addSectionDetails(section)"
          [disabled]="
            !hasValue(customerForm.controls[section['formName']].value)
          "
        ></button>
        <span class="text-xs text-gray-600"
          >After entering details, click on + button to consider it while saving
          customer data.</span
        >
      </div> -->
      <!-- *** MULTISECTION ADD BTN ENDS *** -->
    </p-panel>
  </ng-container>
  <div class="form-group btn-grp buttons-section">
    <button
      *ngIf="relatedPartyTypeCode != 'C'"
      pButton
      pRipple
      type="button"
      label="Go Back"
      class="p-button-raised"
      (click)="onClickBack()"
    ></button>
    <button
      pButton
      pRipple
      type="button"
      label="Save"
      class="p-button-raised"
      (click)="onSubmit()"
      [disabled]="deactivated"
    ></button>
    <button
      pButton
      pRipple
      type="button"
      label="Reset"
      class="p-button-warning"
      (click)="onReset()"
      [disabled]="deactivated"
    ></button>
    <button
      *ngIf="mode == 'edit' && relatedPartyTypeCode == 'C'"
      pButton
      pRipple
      type="button"
      label="{{ deactivated ? 'Activate' : 'Deactivate' }}"
      class="p-button-raised"
      (click)="onActive(data)"
    ></button>
  </div>
</form>
<!-- <app-document-collection
  *ngIf="documentSettingJsonData && documentSettingJsonData.length"
  [documentSettingData]="documentSettingJsonData"
  [submitted]="submitted"
  [customerUploadedDocumentsData]="customerUploadedDocumentsData"
  [idIssueCountryList]="idIssueCountryList"
  (errorFromDocumentComponent)="errorFromDocumentComponent = $event"
></app-document-collection> -->
<div class="NorecordFound" *ngIf="!(apiData && objectKeys(apiData)['length'])">
  <div class="row">
    <div class="col-12"><img src="assets/noRecordFound.svg" /></div>
  </div>
  <div class="row">
    <div class="col-12">
      <p>No Data Found.</p>
    </div>
  </div>
</div>

<p-confirmDialog
  key="resetINDWarning"
  class="confirm-popup"
  #cd
  [closable]="false"
>
  <p-footer>
    <button
      type="button"
      pButton
      icon="pi pi-check"
      label="Yes"
      (click)="cd.accept()"
    ></button>

    <button
      type="button"
      pButton
      icon="pi pi-times"
      label="No"
      (click)="cd.reject()"
    ></button>
  </p-footer>
</p-confirmDialog>
<p-confirmDialog
  key="activeDeactiveStatus"
  class="status-confirm confirm-popup"
  #cd4
  [closable]="false"
>
  <p-footer>
    <button
      type="button"
      pButton
      icon="pi pi-check"
      label="Yes"
      (click)="cd4.accept()"
    ></button>

    <button
      type="button"
      pButton
      icon="pi pi-times"
      label="No"
      (click)="cd4.reject()"
    ></button>
  </p-footer>
</p-confirmDialog>
<div>
  <p-dialog
    [(visible)]="clickforview"
    [modal]="true"
    [style]="{ width: '70vw', left: '50px' }"
    (onHide)="closeDialog()"
  >
    <ng-template pTemplate="header"> </ng-template>
    <p-table
      [value]="customerDataForView"
      class="search-view-table"
      [rowHover]="true"
      [style]="{ width: '100%' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th *ngFor="let col of viewCustomerTableCols">{{ col.header }}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td *ngFor="let col of viewCustomerTableCols">
            {{ product[col["name"]] }}
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td>No Data found.</td>
        </tr>
      </ng-template>
    </p-table>
    <div class="p-field-checkbox" style="padding: 1rem">
      <p-checkbox
        [(ngModel)]="checked"
        binary="true"
        inputId="binary"
      ></p-checkbox>
      <label for="binary" style="position: relative; top: 4px; left: 10px"
        >I confirm that I have verified, customer is not same.</label
      >
    </div>
    <div class="customerViewBtn">
      <button
        type="button"
        pButton
        icon="pi pi-check"
        label="Continue"
        (click)="onCustomerSubmit()"
        [disabled]="checked == false"
      ></button>

      <button
        type="button"
        class="customerViewBtn2"
        pButton
        icon="pi pi-times"
        label="Cancel"
        (click)="onCustomerReject()"
      ></button>
    </div>
  </p-dialog>
</div>

<!-- <app-confirm-dialog-modal
  [key]="'confirmDialog'"
  [header]="'Confirmation'"
  [acceptLabel]="'Yes'"
  [rejectLabel]="'No'"
  (confirm)="onConfirm()"
  (reject)="onReject()"
>
</app-confirm-dialog-modal> -->
