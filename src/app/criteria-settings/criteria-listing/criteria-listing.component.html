<div class="visible-main-section">
  <div class="pagetitle">
    <div class="infoicon">
      <img height="22px" src="../assets/info.svg" alt="" />
      List of criteria's created for forms.
    </div>
    <div class="addnew">
      <button
        pButton
        pRipple
        type="button"
        label="Add New Criteria"
        class="p-button-raised"
        routerLink="add-criteria-settings"
      ></button>
    </div>
  </div>
  <div class="ptable">
    <p-card class="p-col-12" *ngIf="!criteriaSettingData">
      {{ noDataMsg }}
    </p-card>
    <p-table
      *ngIf="criteriaSettingData"
      class="criteria-setting-table"
      #dt
      [value]="criteriaSettingData"
      sortMode="multiple"
      dataKey="id"
      [rows]="10"
      [paginator]="true"
      [rowHover]="true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th
            class="table-titles"
            style="width: 135px"
            [pSortableColumn]="'applications'"
          >
            Application
            <div
              (click)="$event.stopPropagation()"
              style="right: 35%"
              class="filter-icon"
            >
              <img
                height="13px"
                id="rou"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showApplicationOptions = !showApplicationOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="applications"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showApplicationOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'applications', 'in')"
                (onPanelHide)="showApplicationOptions = !showApplicationOptions"
              >
              </p-multiSelect>
            </div>
          </th>
          <th
            class="table-titles"
            style="width: 160px"
            [pSortableColumn]="'form'"
          >
            Form
            <div
              (click)="$event.stopPropagation()"
              style="right: 60%"
              class="filter-icon"
            >
              <img
                height="12px"
                id="cou"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showFormOptions = !showFormOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="forms"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showFormOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'form', 'in')"
                (onPanelHide)="showFormOptions = !showFormOptions"
              ></p-multiSelect>
            </div>
          </th>
          <th
            class="table-titles"
            style="width: 140px"
            [pSortableColumn]="'totalCriteraiField'"
          >
            Total Criteria Fields
            <div (click)="$event.stopPropagation()" class="filter-icon">
              <img
                height="12px"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showCriteriaFieldsOptions = !showCriteriaFieldsOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="totalCriteriaFields"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showCriteriaFieldsOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'totalCriteraiField', 'in')"
                (onPanelHide)="
                  showCriteriaFieldsOptions = !showCriteriaFieldsOptions
                "
              ></p-multiSelect>
            </div>
          </th>
          <th
            class="table-titles"
            style="width: 120px"
            [pSortableColumn]="'totalListFields'"
          >
            Total List Fields
            <div (click)="$event.stopPropagation()" class="filter-icon">
              <img
                height="12px"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showListFieldsOptions = !showListFieldsOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="totalListFields"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showListFieldsOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'totalListField', 'in')"
                (onPanelHide)="showListFieldsOptions = !showListFieldsOptions"
              ></p-multiSelect>
            </div>
          </th>
          <th
            class="table-titles"
            style="width: 110px"
            [pSortableColumn]="'createdDate'"
          >
            Created Date
            <div (click)="$event.stopPropagation()" class="filter-icon">
              <img
                height="12px"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showCreatedDateOptions = !showCreatedDateOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="createdDates"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showCreatedDateOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'createdDate', 'in')"
                (onPanelHide)="showCreatedDateOptions = !showCreatedDateOptions"
              ></p-multiSelect>
            </div>
          </th>
          <th
            class="table-titles"
            style="width: 135px"
            [pSortableColumn]="'createdBy'"
          >
            Created By
            <div
              (click)="$event.stopPropagation()"
              style="right: 35%"
              class="filter-icon"
            >
              <img
                height="12px"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showCreatedByOptions = !showCreatedByOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="createdBy"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showCreatedByOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'createdBy', 'in')"
                (onPanelHide)="showCreatedByOptions = !showCreatedByOptions"
              ></p-multiSelect>
            </div>
          </th>
          <th class="table-titles" style="width: 100px">Operations</th>
          <th
            class="table-titles"
            style="text-align: center; width: 100px"
            [pSortableColumn]="'status'"
          >
            Status
            <div (click)="$event.stopPropagation()" class="filter-icon">
              <img
                height="12px"
                class="pi pi-filter criteriaSettingFilterIcon"
                (click)="showStatusesOptions = !showStatusesOptions"
                src="../assets/filter.svg"
                alt=""
              />
              <p-multiSelect
                #ms1
                [options]="statuses"
                [filter]="true"
                [displaySelectedLabel]="false"
                [overlayVisible]="showStatusesOptions"
                [defaultLabel]="'Search'"
                [appendTo]="'body'"
                (onChange)="dt.filter($event.value, 'status', 'in')"
                (onPanelHide)="showStatusesOptions = !showStatusesOptions"
              ></p-multiSelect>
            </div>
          </th>
        </tr>
        <tr class="search-row">
          <th>
            <span style="max-width: 100%" class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                [classList]="'table-search'"
                placeholder="Search"
                (input)="
                  dt.filter(
                    $any($event.target).value,
                    'applications',
                    'contains'
                  )
                "
              />
            </span>
          </th>
          <th>
            <span style="max-width: 100%" class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                [classList]="'table-search'"
                placeholder="Search"
                (input)="
                  dt.filter($any($event.target).value, 'form', 'contains')
                "
              />
            </span>
          </th>
          <th>
            <span style="max-width: 100%" class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                [classList]="'table-search'"
                placeholder="Search"
                (input)="
                  dt.filter(
                    $any($event.target).value,
                    'totalCriteraiField',
                    'contains'
                  )
                "
              />
            </span>
          </th>
          <th>
            <span style="max-width: 100%" class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                [classList]="'table-search'"
                placeholder="Search"
                (input)="
                  dt.filter(
                    $any($event.target).value,
                    'totalListField',
                    'contains'
                  )
                "
              />
            </span>
          </th>
          <th>
            <span style="max-width: 100%" class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                [classList]="'table-search'"
                placeholder="Search"
                (input)="
                  dt.filter(
                    $any($event.target).value,
                    'createdDate',
                    'contains'
                  )
                "
              />
            </span>
          </th>
          <th>
            <span style="max-width: 100%" class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                [classList]="'table-search'"
                placeholder="Search"
                (input)="
                  dt.filter($any($event.target).value, 'createdBy', 'contains')
                "
              />
            </span>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-criteriaSetting>
        <tr>
          <td style="font-size: 12px; border: none; border-bottom: none">
            <a>{{ criteriaSetting.applications }}</a>
          </td>
          <td style="font-size: 12px; border: none; border-bottom: none">
            <span class="image-text">{{ criteriaSetting.form }}</span>
          </td>
          <td
            style="
              font-size: 12px;
              border: none;
              border-bottom: none;

              text-align: center;
            "
          >
            <span class="image-text">{{
              criteriaSetting.totalCriteraiField
            }}</span>
          </td>
          <td
            style="
              font-size: 12px;
              border: none;
              border-bottom: none;

              text-align: center;
            "
          >
            <span class="image-text">{{ criteriaSetting.totalListField }}</span>
          </td>
          <td style="font-size: 12px; border: none; border-bottom: none">
            <span class="image-text">{{
              criteriaSetting.createdDate | date : "mediumDate"
            }}</span>
          </td>
          <td style="font-size: 12px; border: none; border-bottom: none">
            <span class="image-text">{{ criteriaSetting.createdBy }}</span>
          </td>
          <td style="font-size: 12px; border: none; border-bottom: none">
            <span class="image-text">
              <button
                pButton
                type="button"
                icon="pi pi-clone"
                class="operation-btns mr-2"
              ></button>
              <button
                pButton
                type="button"
                icon="pi pi-eye"
                class="operation-btns"
                (click)="openClickForView(criteriaSetting)"
              ></button>
            </span>
          </td>
          <td style="border: none; text-align: center">
            <label class="switch" style="border: none">
              <input
                #statusInp
                type="checkbox"
                [checked]="
                  criteriaSetting.status == 'Active' ||
                  criteriaSetting.status == 'A'
                    ? true
                    : false
                "
              />
              <span class="slider round"></span>
            </label>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4">No Data found.</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="paginatorleft" let-state>
        {{ state.page * state.rows + 1 }} -
        {{
          state.rows * (state.page + 1) > state.totalRecords
            ? state.totalRecords
            : state.rows * (state.page + 1)
        }}
        of {{ state.totalRecords }}
      </ng-template>
    </p-table>
  </div>
</div>
<div>
  <p-dialog
    [(visible)]="clickforview"
    [appendTo]="'body'"
    [modal]="true"
    [style]="{ width: '70vw' }"
    class="viewTemplateModal"
  >
    <ng-template
      pTemplate="header"
      style="
        border-top-right-radius: 10px !important;
        background: rgb(233, 238, 250);
        font-family: IBM Plex Sans, sans-serif;
      "
    >
      Application: Casmex Core | Form: Payment Mode Settings</ng-template
    >
    <p-table
      [value]="criteriaDataArrayView"
      class="criteria-view-table"
      [rowHover]="true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Field Name</th>
          <th>Display Name</th>
          <th>Field Type</th>
          <th>Operator</th>
          <th>Criteria Priority</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>{{ product.fieldName }}</td>
          <td>{{ product.displayName }}</td>
          <td>{{ product.fieldType }}</td>
          <td>{{ product.operations }}</td>
          <td>{{ product.orderID }}</td>
        </tr>
      </ng-template>
    </p-table>
  </p-dialog>
</div>
