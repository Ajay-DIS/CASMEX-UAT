<form
  *ngIf="objectKeys(apiData).length"
  class="custom-form"
  [formGroup]="corporateForm"
>
  <ng-container *ngFor="let section of formSections">
    <p-panel
      [header]="section.formName"
      [toggleable]="true"
      [formGroup]="corporateForm.controls[section.formName]"
      *ngIf="section.isVisible"
    >
      <div class="row">
        <ng-container *ngFor="let field of section.fields">
          <div
            *ngIf="field.visible"
            [ngClass]="{
              'col-2': true,
              checkbox: field.fieldType == 'checkbox'
            }"
          >
            <label>{{ field.fieldLabel }}</label
            ><span *ngIf="field.required" class="required">*</span>
            <ng-container [ngSwitch]="field.fieldType">
              <input
                *ngSwitchCase="'text'"
                type="text"
                class="block"
                pInputText
                [formControlName]="field.name"
                maxlength="40"
                minlength="2"
              />
              <input
                *ngSwitchCase="'number'"
                type="text"
                class="block"
                pInputText
                [formControlName]="field.name"
              />
              <p-calendar
                *ngSwitchCase="'date'"
                class="block"
                placeholder="MM/DD/YYYY"
                [showIcon]="true"
                [formControlName]="field.name"
                [minDate]="field.minDate"
                [maxDate]="field.maxDate"
                [defaultDate]="field.defaultDate"
                [readonlyInput]="true"
                [appendTo]="'body'"
              ></p-calendar>
              <p-checkbox
                *ngSwitchCase="'checkbox'"
                [formControlName]="field.name"
                [binary]="true"
                inputId="binary"
                (onChange)="sameAddress($event, field.name)"
              ></p-checkbox>

              <p-dropdown
                *ngSwitchCase="'select'"
                class="block"
                [options]="masterData[field.apiKey]"
                [formControlName]="field.name"
                placeholder="&nbsp;"
                optionLabel="codeName"
              ></p-dropdown>
              <p-dropdown
                *ngSwitchCase="'smart-search'"
                class="block"
                [formControlName]="field.name"
                [options]="masterData[field.apiKey]"
                optionLabel="codeName"
                [filter]="true"
                filterBy="codeName"
                placeholder="Type to search"
              >
                <ng-template pTemplate="selectedItem">
                  <div class="country-item country-item-value" *ngIf="field">
                    <div>
                      {{
                        corporateForm.controls[section.formName]["controls"][
                          field.name
                        ].value.codeName
                      }}
                    </div>
                  </div>
                </ng-template>
                <ng-template let-country pTemplate="item">
                  <div class="country-item">
                    <div>{{ country.codeName }}</div>
                  </div>
                </ng-template>
              </p-dropdown>
              <div *ngSwitchCase="'file'" class="file-upload">
                <div class="file-upload-select" (click)="inpFile.click()">
                  <div class="file-select-name">
                    {{ inpFile.files.length ? inpFile.files[0].name : "" }}
                  </div>
                  <div class="file-select-button">
                    <i class="pi pi-upload"></i>
                  </div>
                  <input
                    #inpFile
                    type="file"
                    name="file-upload-input"
                    id="file-upload-input"
                  />
                </div>
              </div>

              <!-- need to update for multi-select case -->
              <select
                *ngSwitchCase="'multiselect'"
                multiple
                [formControlName]="field.name"
              >
                <option
                  *ngFor="let option of field.options"
                  [value]="option.value"
                >
                  {{ option.label }}
                </option>
              </select>
              <!-- need to update for multi-select case END -->
            </ng-container>
            <small
              *ngIf="
                submitted &&
                corporateForm.controls[section.formName]['controls'][field.name]
                  .errors?.required
              "
              class="p-error block"
              >{{ field.fieldLabel }} is required.</small
            >
            <small
              *ngIf="
                submitted &&
                corporateForm.controls[section.formName]['controls'][field.name]
                  .errors?.minlength
              "
              class="p-error block"
              >{{ field.fieldLabel }} must be 2 characters long.</small
            >
            <small
              *ngIf="
                submitted &&
                corporateForm.controls[section.formName]['controls'][field.name]
                  .errors?.pattern
              "
              class="p-error block"
              >Improper {{ field.fieldLabel }} format.</small
            >
            <small
              *ngIf="
                submitted &&
                corporateForm.controls[section.formName]['controls'][field.name]
                  .errors?.maxlength
              "
              class="p-error block"
              >{{ field.fieldLabel }} must not exceed 40 characters.</small
            >
          </div>
        </ng-container>
      </div>
    </p-panel>
    <p-panel
      *ngIf="!section.isVisible"
      [header]="section.formName"
      class="no-visible"
    >
      No Visible fields available.
    </p-panel>
  </ng-container>
  <div class="form-group btn-grp buttons-section">
    <button
      pButton
      pRipple
      type="button"
      label="Save"
      class="p-button-raised"
      (click)="onSubmit()"
    ></button>
    <button
      pButton
      pRipple
      type="button"
      label="Reset"
      class="p-button-warning"
      (click)="onReset()"
    ></button>
  </div>
</form>
<div class="NorecordFound" *ngIf="noDataMsg">
  <div class="row">
    <div class="col-12"><img src="assets/noRecordFound.svg" /></div>
  </div>
  <div class="row">
    <div class="col-12">
      <p>No Record Found.</p>
    </div>
  </div>
</div>
